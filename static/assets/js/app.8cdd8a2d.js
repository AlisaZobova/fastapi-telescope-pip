(function(){"use strict";var t={5063:function(t,e,a){var s=a(3751),n=a(641);const l={id:"app"},u={class:"container"},i={class:"sidebar"},r={class:"content"};function o(t,e,a,s,o,d){const c=(0,n.g2)("router-link"),h=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",u,[(0,n.Lk)("nav",i,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(c,{class:"link",to:{name:"http-requests"}},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("HTTP Requests")]))),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(c,{class:"link",to:{name:"db-queries"}},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("DB Queries")]))),_:1})])])]),(0,n.Lk)("main",r,[(0,n.bF)(h)])])])}var d={name:"App"},c=a(6262);const h=(0,c.A)(d,[["render",o]]);var p=h,g=a(5220);const k={class:"login-container"},m={class:"login-box"};function L(t,e,a,l,u,i){return(0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",m,[e[2]||(e[2]=(0,n.Lk)("h2",null,"Login",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>u.email=t),placeholder:"Enter email",class:"login-input"},null,512),[[s.Jo,u.email]]),(0,n.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.login&&i.login(...t)),class:"login-button"},"Login")])])}a(4114);var b=a(4335),v={data(){return{email:""}},methods:{async login(){try{const t=await b.A.post("/login",{email:this.email});localStorage.setItem("token",t.data.token),this.$router.push("/dashboard")}catch(t){console.error("Login failed",t)}}}};const f=(0,c.A)(v,[["render",L],["__scopeId","data-v-13a455bf"]]);var y=f;function _(t,e){const a=(0,n.g2)("router-link"),s=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[e[2]||(e[2]=(0,n.Lk)("h2",null,"Dashboard",-1)),(0,n.Lk)("nav",null,[(0,n.bF)(a,{to:"/http-requests"},{default:(0,n.k6)((()=>e[0]||(e[0]=[(0,n.eW)("HTTP Requests")]))),_:1}),(0,n.bF)(a,{to:"/db-queries"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)("DB Queries")]))),_:1})]),(0,n.bF)(s)])}const q={},C=(0,c.A)(q,[["render",_]]);var P=C,R=a(33);const Q={key:0,class:"request-details"},D={class:"section"},T=["title"],E={class:"section"},w={key:0,class:"section"},x={class:"section"},X={class:"width-100"},z={key:1,class:"section"},A=["onClick"],F={key:0,class:"width-100"},Y={key:1,class:"width-100"},$=["title"],M={key:1};function H(t,e,a,s,l,u){return!0!==l.loading?((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.Lk)("div",D,[e[5]||(e[5]=(0,n.Lk)("h2",null,"Request Details",-1)),(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[e[0]||(e[0]=(0,n.Lk)("td",null,"Time:",-1)),(0,n.Lk)("td",null,[(0,n.Lk)("span",{title:u.formatFullDatetime(l.httpRequest.created_at)},(0,R.v_)(u.formatRelativeTime(l.httpRequest.created_at)),9,T)])]),(0,n.Lk)("tr",null,[e[1]||(e[1]=(0,n.Lk)("td",null,"Method:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.httpRequest.request_method),1)]),(0,n.Lk)("tr",null,[e[2]||(e[2]=(0,n.Lk)("td",null,"Path:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.httpRequest.request_url),1)]),(0,n.Lk)("tr",null,[e[3]||(e[3]=(0,n.Lk)("td",null,"Status:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.httpRequest.status_code),1)]),(0,n.Lk)("tr",null,[e[4]||(e[4]=(0,n.Lk)("td",null,"Duration:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.httpRequest.response_time),1)])])])]),(0,n.Lk)("div",E,[e[7]||(e[7]=(0,n.Lk)("h2",null,"Authenticated User",-1)),(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[e[6]||(e[6]=(0,n.Lk)("td",null,"ID:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.httpRequest.user_id),1)])])])]),"GET"!==l.httpRequest.request_method?((0,n.uX)(),(0,n.CE)("div",w,[e[8]||(e[8]=(0,n.Lk)("h2",null,"Payload",-1)),(0,n.Lk)("pre",null,(0,R.v_)(l.httpRequest.request_body),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",x,[e[9]||(e[9]=(0,n.Lk)("h2",null,"Response",-1)),(0,n.Lk)("pre",X,(0,R.v_)(l.httpRequest.response_body),1)]),l.dbQueries.length>0?((0,n.uX)(),(0,n.CE)("div",z,[e[10]||(e[10]=(0,n.Lk)("h2",null,"DB Queries",-1)),(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.dbQueries,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id,onClick:e=>u.goToQueryDetails(t.id)},[t.db_query.length<500?((0,n.uX)(),(0,n.CE)("td",F,(0,R.v_)(t.db_query),1)):((0,n.uX)(),(0,n.CE)("td",Y,[(0,n.Lk)("span",{title:t.db_query},(0,R.v_)(t.db_query.substring(0,500)+"..."),9,$)])),(0,n.Lk)("td",null,(0,R.v_)(t.db_query_time),1)],8,A)))),128))])])])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",M,e[11]||(e[11]=[(0,n.Lk)("h2",{class:"title"},"Loading...",-1)])))}var O=a(4353),I=a.n(O),S=a(3826),j=a.n(S),N=a(8569),B=a.n(N),U=a(6279),W=a.n(U);I().extend(W()),I().extend(j()),I().extend(B()),I().extend(W());var Z={data(){return{httpRequest:{},dbQueries:[],loading:!0}},async created(){const t=this.$route.params.id;await b.A.get(`/http-requests/${t}`).then((t=>{this.httpRequest=t.data})),await b.A.get(`/http-requests/${t}/db-queries`).then((t=>{this.dbQueries=t.data})),this.loading=!1},methods:{goToQueryDetails(t){this.$router.push({name:"db-query-detail",params:{id:t}})},formatRelativeTime(t){const e=I().tz.guess(),a=I().utc(t).tz(e);return a.fromNow()},formatFullDatetime(t){const e=I().tz.guess();return I().utc(t).tz(e).format("YYYY-MM-DD HH:mm:ss [Z]")}}};const K=(0,c.A)(Z,[["render",H],["__scopeId","data-v-53ed6610"]]);var G=K;const J={key:0},V={class:"request-table"},tt=["onClick"],et=["title"],at={class:"pagination-controls"},st=["disabled"],nt={class:"pagination-info"},lt=["disabled"],ut={key:1};function it(t,e,a,s,l,u){return!1===l.loading?((0,n.uX)(),(0,n.CE)("div",J,[e[3]||(e[3]=(0,n.Lk)("h3",{class:"title"},"HTTP Requests",-1)),(0,n.Lk)("table",V,[e[2]||(e[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Method"),(0,n.Lk)("th",null,"Path"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Response Time"),(0,n.Lk)("th",null,"Happened")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.httpRequests,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id,onClick:e=>u.goToRequestDetails(t.id)},[(0,n.Lk)("td",{class:(0,R.C4)(u.getMethodClass(t.request_method))},(0,R.v_)(t.request_method),3),(0,n.Lk)("td",null,(0,R.v_)(t.request_url),1),(0,n.Lk)("td",{class:(0,R.C4)(u.getStatusClass(t.status_code))},(0,R.v_)(t.status_code),3),(0,n.Lk)("td",null,(0,R.v_)(t.response_time)+" ms",1),(0,n.Lk)("td",null,[(0,n.Lk)("span",{title:u.formatFullDatetime(t.created_at)},(0,R.v_)(u.formatRelativeTime(t.created_at)),9,et)])],8,tt)))),128))])]),(0,n.Lk)("div",at,[(0,n.Lk)("button",{class:"pagination-btn",onClick:e[0]||(e[0]=(...t)=>u.prevPage&&u.prevPage(...t)),disabled:l.page<=1},"Previous",8,st),(0,n.Lk)("span",nt,"Page "+(0,R.v_)(l.page)+" of "+(0,R.v_)(l.totalPages),1),(0,n.Lk)("button",{class:"pagination-btn",onClick:e[1]||(e[1]=(...t)=>u.nextPage&&u.nextPage(...t)),disabled:l.page>=l.totalPages},"Next",8,lt)])])):((0,n.uX)(),(0,n.CE)("div",ut,e[4]||(e[4]=[(0,n.Lk)("h2",{class:"title"},"Loading...",-1)])))}I().extend(W()),I().extend(j()),I().extend(B());var rt={data(){return{httpRequests:[],loading:!0,page:1,size:10,totalPages:1}},watch:{"$route.query.page":{immediate:!0,handler(t){const e=parseInt(t)||1;e!==this.page&&(this.page=e,this.fetchRequests())}}},mounted(){this.fetchRequests()},methods:{async fetchRequests(){this.loading=!0;try{const t=await b.A.get("/http-requests",{params:{page:this.page,size:this.size}});this.httpRequests=t.data.items,this.totalPages=t.data.pages}finally{this.loading=!1}},changePage(t){t!==this.page&&t>=1&&t<=this.totalPages&&this.$router.push({path:"/http-requests",query:{...this.$route.query,page:t}})},nextPage(){this.changePage(this.page+1)},prevPage(){this.changePage(this.page-1)},goToRequestDetails(t){this.$router.push({name:"http-request-detail",params:{id:t}})},formatRelativeTime(t){const e=I().tz.guess();return I().utc(t).tz(e).fromNow()},formatFullDatetime(t){const e=I().tz.guess();return I().utc(t).tz(e).format("YYYY-MM-DD HH:mm:ss [Z]")},getStatusClass(t){return t>=200&&t<300?"status-green":t>=300&&t<400?"status-blue":t>=400&&t<500?"status-orange":t>=500?"status-red":void 0},getMethodClass(t){return"GET"===t?"method-grey":"POST"===t?"method-blue":"PUT"===t?"method-green":"DELETE"===t?"method-red":void 0}}};const ot=(0,c.A)(rt,[["render",it],["__scopeId","data-v-faa76f9a"]]);var dt=ot;const ct={key:0},ht={class:"query-table"},pt=["onClick"],gt={key:0,class:"width-100"},kt={key:1,class:"width-100"},mt=["title"],Lt=["title"],bt={class:"pagination-controls"},vt=["disabled"],ft={class:"pagination-info"},yt=["disabled"],_t={key:1};function qt(t,e,a,s,l,u){return!1===l.loading?((0,n.uX)(),(0,n.CE)("div",ct,[e[3]||(e[3]=(0,n.Lk)("h2",{class:"title"},"DB Queries",-1)),(0,n.Lk)("table",ht,[e[2]||(e[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Query"),(0,n.Lk)("th",null,"Query Time"),(0,n.Lk)("th",null,"Happened")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.dbQueries,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id,onClick:e=>u.goToQueryDetails(t.id)},[t.db_query.length<500?((0,n.uX)(),(0,n.CE)("td",gt,(0,R.v_)(t.db_query),1)):((0,n.uX)(),(0,n.CE)("td",kt,[(0,n.Lk)("span",{title:t.db_query},(0,R.v_)(t.db_query.substring(0,500)+"..."),9,mt)])),(0,n.Lk)("td",null,(0,R.v_)(t.db_query_time)+" ms",1),(0,n.Lk)("td",null,[(0,n.Lk)("span",{title:u.formatFullDatetime(t.created_at)},(0,R.v_)(u.formatRelativeTime(t.created_at)),9,Lt)])],8,pt)))),128))])]),(0,n.Lk)("div",bt,[(0,n.Lk)("button",{class:"pagination-btn",onClick:e[0]||(e[0]=(...t)=>u.prevPage&&u.prevPage(...t)),disabled:l.page<=1},"Previous",8,vt),(0,n.Lk)("span",ft,"Page "+(0,R.v_)(l.page)+" of "+(0,R.v_)(l.totalPages),1),(0,n.Lk)("button",{class:"pagination-btn",onClick:e[1]||(e[1]=(...t)=>u.nextPage&&u.nextPage(...t)),disabled:l.page>=l.totalPages},"Next",8,yt)])])):((0,n.uX)(),(0,n.CE)("div",_t,e[4]||(e[4]=[(0,n.Lk)("h2",{class:"title"},"Loading...",-1)])))}I().extend(W()),I().extend(j()),I().extend(B());var Ct={data(){return{dbQueries:[],loading:!0,page:1,size:10,totalPages:1}},watch:{"$route.query.page":{immediate:!0,handler(t){const e=parseInt(t)||1;e!==this.page&&(this.page=e,this.fetchQueries())}}},mounted(){this.fetchQueries()},methods:{async fetchQueries(){this.loading=!0;try{const t=await b.A.get("/db-queries/",{params:{page:this.page,size:this.size}});this.dbQueries=t.data.items,this.totalPages=t.data.pages}finally{this.loading=!1}},changePage(t){t!==this.page&&t>=1&&t<=this.totalPages&&this.$router.push({path:"/db-queries",query:{...this.$route.query,page:t}})},nextPage(){this.changePage(this.page+1)},prevPage(){this.changePage(this.page-1)},goToQueryDetails(t){this.$router.push({name:"db-query-detail",params:{id:t}})},formatRelativeTime(t){const e=I().tz.guess();return I().utc(t).tz(e).fromNow()},formatFullDatetime(t){const e=I().tz.guess();return I().utc(t).tz(e).format("YYYY-MM-DD HH:mm:ss [Z]")}}};const Pt=(0,c.A)(Ct,[["render",qt],["__scopeId","data-v-6e816420"]]);var Rt=Pt;const Qt={key:0},Dt={class:"section"},Tt=["title"],Et={class:"section"},wt={class:"width-100"},xt={key:1};function Xt(t,e,a,s,l,u){return!1===l.loading?((0,n.uX)(),(0,n.CE)("div",Qt,[e[7]||(e[7]=(0,n.Lk)("h2",{class:"title"},"Query Details",-1)),(0,n.Lk)("div",Dt,[(0,n.Lk)("table",null,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[e[1]||(e[1]=(0,n.Lk)("td",null,"Query id:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.dbQuery.id),1)]),(0,n.Lk)("tr",null,[e[2]||(e[2]=(0,n.Lk)("td",null,"Happened:",-1)),(0,n.Lk)("td",null,[(0,n.Lk)("span",{title:u.formatFullDatetime(l.dbQuery.created_at)},(0,R.v_)(u.formatRelativeTime(l.dbQuery.created_at)),9,Tt)])]),(0,n.Lk)("tr",null,[e[3]||(e[3]=(0,n.Lk)("td",null,"Level:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.dbQuery.level),1)]),(0,n.Lk)("tr",null,[e[4]||(e[4]=(0,n.Lk)("td",null,"Query time:",-1)),(0,n.Lk)("td",null,(0,R.v_)(l.dbQuery.db_query_time),1)]),(0,n.Lk)("tr",null,[e[5]||(e[5]=(0,n.Lk)("td",null,"Request:",-1)),(0,n.Lk)("td",{class:"link",onClick:e[0]||(e[0]=t=>u.goToRequestDetails(l.dbQuery.log_http_request_id))},(0,R.v_)(l.dbQuery.log_http_request_id),1)])])])]),(0,n.Lk)("div",Et,[e[6]||(e[6]=(0,n.Lk)("h2",null,"Query",-1)),(0,n.Lk)("pre",wt,(0,R.v_)(l.dbQuery.db_query),1)])])):((0,n.uX)(),(0,n.CE)("div",xt,e[8]||(e[8]=[(0,n.Lk)("h2",{class:"title"},"Loading...",-1)])))}I().extend(W()),I().extend(j()),I().extend(B()),I().extend(W());var zt={data(){return{dbQuery:{},loading:!0}},async created(){const t=this.$route.params.id;await b.A.get(`/db-queries/${t}`).then((t=>{this.dbQuery=t.data})),this.loading=!1},methods:{goToRequestDetails(t){this.$router.push({name:"http-request-detail",params:{id:t}})},formatRelativeTime(t){const e=I().tz.guess(),a=I().utc(t).tz(e);return a.fromNow()},formatFullDatetime(t){const e=I().tz.guess();return I().utc(t).tz(e).format("YYYY-MM-DD HH:mm:ss [Z]")}}};const At=(0,c.A)(zt,[["render",Xt],["__scopeId","data-v-dc020b46"]]);var Ft=At;const Yt=new g.aE({history:(0,g.LA)(),routes:[{path:"/telescope/dashboard/login",name:"login",component:y},{path:"/telescope/dashboard",name:"dashboard",component:P},{path:"/telescope/dashboard/http-requests",name:"http-requests",component:dt},{path:"/telescope/dashboard/db-queries",name:"db-queries",component:Rt},{path:"/telescope/dashboard/http-requests/:id",name:"http-request-detail",component:G},{path:"/telescope/dashboard/db-queries/:id",name:"db-query-detail",component:Ft}]});var $t=Yt;(0,s.Ef)(p).use($t).mount("#app"),b.A.defaults.baseURL=window.appConfig?.apiBaseUrl||"http://localhost:8000/api/telescope",b.A.defaults.headers.common["Accept"]="application/json"}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,a),l.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,l){if(!s){var u=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],l=t[d][2];for(var i=!0,r=0;r<s.length;r++)(!1&l||u>=l)&&Object.keys(a.O).every((function(t){return a.O[t](s[r])}))?s.splice(r--,1):(i=!1,l<u&&(u=l));if(i){t.splice(d--,1);var o=n();void 0!==o&&(e=o)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[s,n,l]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,l,u=s[0],i=s[1],r=s[2],o=0;if(u.some((function(e){return 0!==t[e]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var d=r(a)}for(e&&e(s);o<u.length;o++)l=u[o],a.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return a.O(d)},s=self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(5063)}));s=a.O(s)})();